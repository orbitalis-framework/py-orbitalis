
Plugin:

constraints: ...
connections: { core_id, when, topic }
core_descriptors: [ { descriptors } ]
features


Core:

needs: ...
plugged_plugins: plugin_id => { plugin descriptor }
plugin_descriptors: [ { descriptors } ]

# core -> plugin
(plugin_)feature_name: [
    {
        identifier (plugin),
        topic,
        schema,
        when
    }
]
# plugin -> core
(core_)feature_name: {
    topic => identifier (plugin)    # schema definito a priori per la feature
}




Per eseguire la feature F dato un input I:

1. Cerco tra i plugin che hanno la feature quella che hanno lo schema compatibile con I
2. Invio al primo/a tutti/solo a quello indicato



TODO:

- Magic method per chiamare le feature
- Decoratore per evitare di definire un event handler
- Sistema per restare in attesa di una risposta dal plugin
- Fornire l'interfaccia del core durante il reply
